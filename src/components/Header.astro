---
import { Menu, X } from 'lucide-react';
---

<header class="fixed top-0 w-full bg-gray-900/95 backdrop-blur-md z-50 border-b border-gray-800/50">
  <nav class="container mx-auto px-4 py-4">
    <div class="flex items-center justify-between">
      <a href="#" class="flex items-center gap-3 group">
        <img src="/autimind_logo_sq300.png" alt="AutiMind Logo" class="w-12 h-12 rounded-full" />
        <span class="text-2xl font-bold bg-gradient-to-r from-teal-400 to-orange-400 bg-clip-text text-transparent">
          AutiMind
        </span>
      </a>
      
      <div class="hidden md:flex items-center gap-6">
        <a href="#about" class="text-gray-300 hover:text-teal-400 transition-colors relative group text-sm">
          About
          <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-teal-400 transition-all group-hover:w-full"></span>
        </a>
        <a href="/services" class="text-gray-300 hover:text-orange-400 transition-colors relative group text-sm">
          AI Services
          <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-orange-400 transition-all group-hover:w-full"></span>
        </a>
        <a href="/industries" class="text-gray-300 hover:text-teal-400 transition-colors relative group text-sm">
          Industries
          <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-teal-400 transition-all group-hover:w-full"></span>
        </a>
        <a href="/our-work" class="text-gray-300 hover:text-orange-400 transition-colors relative group text-sm">
          Our Work
          <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-orange-400 transition-all group-hover:w-full"></span>
        </a>
        <a href="/astrolms" class="text-gray-300 hover:text-teal-400 transition-colors relative group text-sm">
          AstroLMS
          <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-teal-400 transition-all group-hover:w-full"></span>
        </a>
        <a href="/autimind-investors" class="text-gray-300 hover:text-orange-400 transition-colors relative group text-sm">
          Investors
          <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-orange-400 transition-all group-hover:w-full"></span>
        </a>
        <a href="#contact" class="text-gray-300 hover:text-teal-400 transition-colors relative group text-sm">
          Contact
          <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-teal-400 transition-all group-hover:w-full"></span>
        </a>
      </div>
      
      <button 
        class="md:hidden text-gray-300 hover:text-teal-400 transition-colors p-2 rounded-lg hover:bg-gray-800/50 focus:outline-none focus:ring-2 focus:ring-teal-400 focus:ring-offset-2 focus:ring-offset-gray-900" 
        id="mobile-menu-toggle"
        aria-label="Toggle mobile menu"
        aria-expanded="false"
        aria-controls="mobile-menu"
      >
        <Menu className="w-6 h-6" id="menu-icon" style={{display: "block"}} />
        <X className="w-6 h-6" id="close-icon" style={{display: "none"}} />
      </button>
    </div>
    
    <!-- Mobile Menu Overlay -->
    <div 
      class="md:hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-40 opacity-0 invisible transition-all duration-300" 
      id="mobile-menu-overlay"
      aria-hidden="true"
    ></div>
    
    <!-- Mobile Menu -->
    <nav 
      class="md:hidden fixed top-0 right-0 h-full w-80 max-w-[85vw] bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 shadow-2xl transform translate-x-full transition-all duration-300 ease-out z-50 border-l border-gray-700/30" 
      id="mobile-menu"
      role="navigation"
      aria-label="Mobile navigation"
    >
      <!-- Subtle gradient background pattern -->
      <div class="absolute inset-0 bg-gradient-to-br from-teal-500/5 via-transparent to-orange-500/5 pointer-events-none"></div>
      
      <!-- Close button at top -->
      <div class="flex justify-end p-4 border-b border-gray-700/30">
        <button 
          class="text-gray-300 hover:text-white p-2 rounded-lg hover:bg-gray-700/30 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-teal-400 focus:ring-offset-2 focus:ring-offset-gray-900"
          id="mobile-menu-close"
          aria-label="Close mobile menu"
        >
          <X className="w-6 h-6" />
        </button>
      </div>
      
      <!-- Menu content -->
      <div class="flex flex-col h-full p-6 overflow-y-auto">
        <!-- Logo section -->
        <div class="flex items-center gap-3 mb-8 pb-6 border-b border-gray-700/30">
          <img src="/autimind_logo_sq300.png" alt="AutiMind Logo" class="w-12 h-12 rounded-full ring-2 ring-teal-400/30" />
          <div class="flex flex-col">
            <span class="text-xl font-bold bg-gradient-to-r from-teal-400 to-orange-400 bg-clip-text text-transparent">
              AutiMind
            </span>
            <span class="text-xs text-gray-400">AI-Driven Solutions</span>
          </div>
        </div>
        
        <!-- Navigation Links -->
        <div class="flex flex-col space-y-2 mb-8">
          <a 
            href="#about" 
            class="group relative flex items-center gap-3 text-gray-300 hover:text-white py-3 px-4 rounded-xl hover:bg-gradient-to-r hover:from-teal-500/10 hover:to-teal-600/10 transition-all duration-200 mobile-menu-link focus:outline-none focus:ring-2 focus:ring-teal-400/50"
            role="menuitem"
          >
            <div class="w-2 h-2 rounded-full bg-teal-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200"></div>
            <span class="font-medium">About</span>
          </a>
          
          <a 
            href="/services" 
            class="group relative flex items-center gap-3 text-gray-300 hover:text-white py-3 px-4 rounded-xl hover:bg-gradient-to-r hover:from-orange-500/10 hover:to-orange-600/10 transition-all duration-200 mobile-menu-link focus:outline-none focus:ring-2 focus:ring-orange-400/50"
            role="menuitem"
          >
            <div class="w-2 h-2 rounded-full bg-orange-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200"></div>
            <span class="font-medium">AI Services</span>
          </a>
          
          <a 
            href="/industries" 
            class="group relative flex items-center gap-3 text-gray-300 hover:text-white py-3 px-4 rounded-xl hover:bg-gradient-to-r hover:from-teal-500/10 hover:to-teal-600/10 transition-all duration-200 mobile-menu-link focus:outline-none focus:ring-2 focus:ring-teal-400/50"
            role="menuitem"
          >
            <div class="w-2 h-2 rounded-full bg-teal-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200"></div>
            <span class="font-medium">Industries</span>
          </a>
          
          <a 
            href="/our-work" 
            class="group relative flex items-center gap-3 text-gray-300 hover:text-white py-3 px-4 rounded-xl hover:bg-gradient-to-r hover:from-orange-500/10 hover:to-orange-600/10 transition-all duration-200 mobile-menu-link focus:outline-none focus:ring-2 focus:ring-orange-400/50"
            role="menuitem"
          >
            <div class="w-2 h-2 rounded-full bg-orange-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200"></div>
            <span class="font-medium">Our Work</span>
          </a>
          
          <a 
            href="/astrolms" 
            class="group relative flex items-center gap-3 text-gray-300 hover:text-white py-3 px-4 rounded-xl hover:bg-gradient-to-r hover:from-teal-500/10 hover:to-teal-600/10 transition-all duration-200 mobile-menu-link focus:outline-none focus:ring-2 focus:ring-teal-400/50"
            role="menuitem"
          >
            <div class="w-2 h-2 rounded-full bg-teal-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200"></div>
            <span class="font-medium">AstroLMS</span>
          </a>
          
          <a 
            href="/dao" 
            class="group relative flex items-center gap-3 text-gray-300 hover:text-white py-3 px-4 rounded-xl hover:bg-gradient-to-r hover:from-orange-500/10 hover:to-orange-600/10 transition-all duration-200 mobile-menu-link focus:outline-none focus:ring-2 focus:ring-orange-400/50"
            role="menuitem"
          >
            <div class="w-2 h-2 rounded-full bg-orange-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200"></div>
            <span class="font-medium">DAO</span>
          </a>
          
          <a 
            href="/autimind-investors" 
            class="group relative flex items-center gap-3 text-gray-300 hover:text-white py-3 px-4 rounded-xl hover:bg-gradient-to-r hover:from-teal-500/10 hover:to-teal-600/10 transition-all duration-200 mobile-menu-link focus:outline-none focus:ring-2 focus:ring-teal-400/50"
            role="menuitem"
          >
            <div class="w-2 h-2 rounded-full bg-teal-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200"></div>
            <span class="font-medium">Investors</span>
          </a>
        </div>
        
        <!-- Call to action button -->
        <div class="mb-8">
          <a 
            href="#contact" 
            class="group relative flex items-center justify-center gap-2 w-full bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white py-4 px-6 rounded-xl font-semibold transition-all duration-300 transform hover:-translate-y-0.5 hover:shadow-lg hover:shadow-teal-500/25 mobile-menu-link focus:outline-none focus:ring-2 focus:ring-teal-400/50"
            role="menuitem"
          >
            <span>Contact Us</span>
            <svg class="w-4 h-4 transition-transform duration-200 group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
            </svg>
          </a>
        </div>
        
        <!-- Social links and footer -->
        <div class="mt-auto pt-6 border-t border-gray-700/30">
          <div class="flex items-center justify-between">
            <span class="text-sm text-gray-400">Connect with us</span>
            <div class="flex gap-3">
              <a 
                href="https://linkedin.com/company/autimind" 
                target="_blank" 
                rel="noopener noreferrer" 
                class="w-10 h-10 bg-blue-600/20 border border-blue-600/30 rounded-lg flex items-center justify-center hover:bg-blue-600 hover:border-blue-600 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-400/50"
                aria-label="Follow us on LinkedIn"
              >
                <svg class="w-5 h-5 text-blue-400 hover:text-white transition-colors" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.338 16.338H13.67V12.16c0-.995-.017-2.277-1.387-2.277-1.39 0-1.601 1.086-1.601 2.207v4.248H8.014v-8.59h2.559v1.174h.037c.356-.675 1.227-1.387 2.526-1.387 2.703 0 3.203 1.778 3.203 4.092v4.711zM5.005 6.575a1.548 1.548 0 11-.003-3.096 1.548 1.548 0 01.003 3.096zm-1.337 9.763H6.34v-8.59H3.667v8.59zM17.668 1H2.328C1.595 1 1 1.581 1 2.298v15.403C1 18.418 1.595 19 2.328 19h15.34c.734 0 1.332-.582 1.332-1.299V2.298C19 1.581 18.402 1 17.668 1z" clip-rule="evenodd"/>
                </svg>
              </a>
            </div>
          </div>
          <div class="text-xs text-gray-500 mt-3 text-center">
            © 2025 AutiMind. All rights reserved.
          </div>
        </div>
      </div>
    </nav>
  </nav>
</header>

<script>
  // Mobile menu elements
  const menuToggle = document.getElementById('mobile-menu-toggle');
  const mobileMenu = document.getElementById('mobile-menu');
  const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
  const mobileMenuClose = document.getElementById('mobile-menu-close');
  const menuIcon = document.getElementById('menu-icon');
  const closeIcon = document.getElementById('close-icon');
  const header = document.querySelector('header');
  
  let isMenuOpen = false;
  
  // Open mobile menu
  function openMobileMenu() {
    isMenuOpen = true;
    
    // Update button state
    menuToggle?.setAttribute('aria-expanded', 'true');
    if (menuIcon) menuIcon.style.display = 'none';
    if (closeIcon) closeIcon.style.display = 'block';
    
    // Show overlay
    if (mobileMenuOverlay) {
      mobileMenuOverlay.classList.remove('opacity-0', 'invisible');
      mobileMenuOverlay.classList.add('opacity-100', 'visible');
      mobileMenuOverlay.setAttribute('aria-hidden', 'false');
    }
    
    // Slide in menu
    if (mobileMenu) {
      mobileMenu.classList.remove('translate-x-full');
      mobileMenu.classList.add('translate-x-0');
    }
    
    // Prevent body scroll
    document.body.style.overflow = 'hidden';
    
    // Focus management - focus first menu item
    setTimeout(() => {
      const firstMenuItem = mobileMenu?.querySelector('.mobile-menu-link');
      firstMenuItem?.focus();
    }, 300);
    
    // Animate menu items with stagger effect
    const menuLinks = document.querySelectorAll('.mobile-menu-link');
    menuLinks.forEach((link, index) => {
      link.style.opacity = '0';
      link.style.transform = 'translateX(20px)';
      
      setTimeout(() => {
        link.style.transition = 'opacity 0.3s ease-out, transform 0.3s ease-out';
        link.style.opacity = '1';
        link.style.transform = 'translateX(0)';
      }, index * 50 + 100);
    });
  }
  
  // Close mobile menu
  function closeMobileMenu() {
    isMenuOpen = false;
    
    // Update button state
    menuToggle?.setAttribute('aria-expanded', 'false');
    if (menuIcon) menuIcon.style.display = 'block';
    if (closeIcon) closeIcon.style.display = 'none';
    
    // Hide overlay
    if (mobileMenuOverlay) {
      mobileMenuOverlay.classList.add('opacity-0', 'invisible');
      mobileMenuOverlay.classList.remove('opacity-100', 'visible');
      mobileMenuOverlay.setAttribute('aria-hidden', 'true');
    }
    
    // Slide out menu
    if (mobileMenu) {
      mobileMenu.classList.add('translate-x-full');
      mobileMenu.classList.remove('translate-x-0');
    }
    
    // Restore body scroll
    document.body.style.overflow = 'auto';
    
    // Return focus to menu toggle
    menuToggle?.focus();
  }
  
  // Toggle menu on button click
  menuToggle?.addEventListener('click', () => {
    if (isMenuOpen) {
      closeMobileMenu();
    } else {
      openMobileMenu();
    }
  });
  
  // Close menu with close button
  mobileMenuClose?.addEventListener('click', closeMobileMenu);
  
  // Close menu when clicking overlay
  mobileMenuOverlay?.addEventListener('click', closeMobileMenu);
  
  // Close menu when clicking on menu links
  document.addEventListener('click', (e) => {
    if (e.target?.classList.contains('mobile-menu-link') && isMenuOpen) {
      closeMobileMenu();
    }
  });
  
  // Keyboard navigation and accessibility
  document.addEventListener('keydown', (e) => {
    if (!isMenuOpen) return;
    
    switch (e.key) {
      case 'Escape':
        e.preventDefault();
        closeMobileMenu();
        break;
        
      case 'Tab':
        // Trap focus within mobile menu
        const focusableElements = mobileMenu?.querySelectorAll(
          'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
        );
        
        if (focusableElements && focusableElements.length > 0) {
          const firstElement = focusableElements[0];
          const lastElement = focusableElements[focusableElements.length - 1];
          
          if (e.shiftKey) {
            // Shift + Tab
            if (document.activeElement === firstElement) {
              e.preventDefault();
              lastElement.focus();
            }
          } else {
            // Tab
            if (document.activeElement === lastElement) {
              e.preventDefault();
              firstElement.focus();
            }
          }
        }
        break;
    }
  });
  
  // Touch gesture support for closing menu (swipe right)
  let touchStartX = 0;
  let touchEndX = 0;
  
  mobileMenu?.addEventListener('touchstart', (e) => {
    touchStartX = e.changedTouches[0].screenX;
  }, { passive: true });
  
  mobileMenu?.addEventListener('touchend', (e) => {
    touchEndX = e.changedTouches[0].screenX;
    // Swipe right to close (reverse of typical behavior since menu slides from right)
    if (touchEndX - touchStartX > 100 && isMenuOpen) {
      closeMobileMenu();
    }
  }, { passive: true });
  
  // Handle window resize - close menu on desktop
  window.addEventListener('resize', () => {
    if (window.innerWidth >= 768 && isMenuOpen) {
      closeMobileMenu();
    }
  });
  
  // Header background change on scroll
  window.addEventListener('scroll', () => {
    if (window.scrollY > 100) {
      header?.classList.add('bg-gray-900/98');
      header?.classList.remove('bg-gray-900/95');
    } else {
      header?.classList.add('bg-gray-900/95');
      header?.classList.remove('bg-gray-900/98');
    }
  }, { passive: true });
  
  // Smooth scrolling for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const href = this.getAttribute('href');
      const target = href ? document.querySelector(href) : null;
      if (target) {
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });
  
  // Initialize - ensure menu is closed on page load
  document.addEventListener('DOMContentLoaded', () => {
    closeMobileMenu();
  });
</script>